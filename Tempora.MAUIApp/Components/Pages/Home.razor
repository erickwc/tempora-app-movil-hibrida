@page "/home"
@inject NavigationManager navManager

<main style="gap:24px; display:flex; flex-direction:column; height:100vh;">

   
    <section class="mt-4" style="gap:16px; display:flex; justify-content:space-between; align-items:center;">
        @* <div>
            <img class="img-perfil" src="/Images/setting.svg" alt="Alternate Text" />
        </div> *@
        <div>
            <h1 class="t16">Erick Caceres</h1>
            <p class="parr">@fechaHoraActual</p>
        </div>
        <div>
            <button class="btn-goback"> <img src="/Images/setting.svg" alt="Alternate Text" /> </button>
        </div>
    </section>
    <section>
            <div class="inp-cont">
                <img class="ico-inp left" src="/Images/search.svg" alt="Alternate Text" />
                <input placeholder="Busca un periodo por el nombre" class="inp parr" type="text" name="name" value="" />
            </div>
    </section>
    <section class="d-flex" style="gap:8px;">
        <p class="parr">Tipo: </p>
        <select class="select">
            <option value="value">Todos</option>
            <option value="value">Finalizados</option>
            <option value="value">Pendientes</option>
        </select>
    </section>
    <section class="d-flex justify-content-between">
        <h2 class="t20">Periodos</h2>
        <p class="parr">0 Periodos registrados</p>
    </section>
    <section>

       
        <section class="card-period grid" style="gap:42px;">
            <div class="d-flex justify-content-between align-items-center">
                <p class="status">Pendiente</p>
                <span @onclick="EditarPeriodo" class="bton-card"><img src="/Images/sttngcard.svg" alt="Alternate Text" /></span>
            </div>
            <div class="grid" style="gap:16px;">
                <div class="grid" style="gap:8px;">
                <h3 class="t16">Servicio Social ESFE</h3>
                <p class="parr">Fecha</p>
            </div>
            <div>
                <p style="text-align:end;" class="parr">0 horas restantes</p>
                <progress value="30" max="100"></progress>
            </div>
            </div>
        </section>
      
       


    </section>

    <button @onclick="NuevoPeriodo" style="position: fixed; bottom: 24px; left: 24px; right: 24px; width: calc(100% - 48px);" class="bton bton-black" type="submit">Nuevo periodo</button>



</main>


@code {
    private string fechaHoraActual;

    protected override void OnInitialized()
    {
        // Inicializa la fecha y hora actuales
        ActualizarFechaHora();

        // Configura un temporizador para actualizar la fecha y hora cada minuto
        var timer = new System.Timers.Timer(60000); // 60000 ms = 1 minuto
        timer.Elapsed += (sender, e) =>
        {
            ActualizarFechaHora();
            InvokeAsync(StateHasChanged); // Actualiza el UI
        };
        timer.Start();
    }

    private void ActualizarFechaHora()
    {
        var ahora = DateTime.Now;

        // Formato de "10 de octubre - 9:30 am"
        fechaHoraActual = ahora.ToString("d 'de' MMMM - h:mm tt", new System.Globalization.CultureInfo("es-ES"));
    }

    private void EditarPeriodo()
    {
        navManager.NavigateTo("/editperiod");
    }

    private void NuevoPeriodo()
    {
        navManager.NavigateTo("/newperiod");
    }
}